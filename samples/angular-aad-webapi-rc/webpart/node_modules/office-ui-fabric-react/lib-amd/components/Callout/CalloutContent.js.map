{"version":3,"sources":["components/Callout/CalloutContent.tsx"],"names":[],"mappings":"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","file":"components/Callout/CalloutContent.js","sourcesContent":["/* tslint:disable:no-unused-variable */\r\nimport * as React from 'react';\r\n/* tslint:enable:no-unused-variable */\r\nimport { ICalloutProps } from './Callout.Props';\r\nimport { DirectionalHint } from '../../common/DirectionalHint';\r\nimport {\r\n  autobind,\r\n  css,\r\n  elementContains,\r\n  getWindow,\r\n  getDocument\r\n} from '../../Utilities';\r\nimport { getRelativePositions, IPositionInfo, IPositionProps } from '../../utilities/positioning';\r\nimport { IRectangle } from '../../common/IRectangle';\r\nimport { focusFirstChild } from '../../utilities/focus';\r\nimport { assign } from '../../Utilities';\r\nimport { Popup } from '../../Popup';\r\nimport { BaseComponent } from '../../common/BaseComponent';\r\nimport './Callout.scss';\r\n\r\nconst BEAK_ORIGIN_POSITION = { top: 0, left: 0 };\r\nconst OFF_SCREEN_POSITION = { top: -9999, left: 0 };\r\nconst BORDER_WIDTH: number = 1;\r\nconst SPACE_FROM_EDGE: number = 8;\r\nexport interface ICalloutState {\r\n  positions?: any;\r\n  slideDirectionalClassName?: string;\r\n  calloutElementRect?: ClientRect;\r\n}\r\n\r\nexport class CalloutContent extends BaseComponent<ICalloutProps, ICalloutState> {\r\n\r\n  public static defaultProps = {\r\n    isBeakVisible: true,\r\n    beakWidth: 16,\r\n    gapSpace: 16,\r\n    directionalHint: DirectionalHint.bottomAutoEdge\r\n  };\r\n\r\n  private _didSetInitialFocus: boolean;\r\n  private _hostElement: HTMLDivElement;\r\n  private _calloutElement: HTMLDivElement;\r\n  private _targetWindow: Window;\r\n  private _bounds: IRectangle;\r\n  private _maxHeight: number;\r\n  private _positionAttempts: number;\r\n  private _target: HTMLElement | MouseEvent;\r\n\r\n  constructor(props: ICalloutProps) {\r\n    super(props, { 'beakStyle': 'beakWidth' });\r\n\r\n    this._didSetInitialFocus = false;\r\n    this.state = {\r\n      positions: null,\r\n      slideDirectionalClassName: null,\r\n      calloutElementRect: null\r\n    };\r\n    this._positionAttempts = 0;\r\n  }\r\n\r\n  public componentDidUpdate() {\r\n    this._setInitialFocus();\r\n    this._updatePosition();\r\n  }\r\n\r\n  public componentWillMount() {\r\n    let target = this.props.targetElement ? this.props.targetElement : this.props.target;\r\n    this._setTargetWindowAndElement(target);\r\n  }\r\n\r\n  public componentWillUpdate(newProps: ICalloutProps) {\r\n    if (newProps.targetElement !== this.props.targetElement || newProps.target !== this.props.target) {\r\n      let newTarget = newProps.targetElement ? newProps.targetElement : newProps.target;\r\n      this._setTargetWindowAndElement(newTarget);\r\n    }\r\n  }\r\n  public componentDidMount() {\r\n    this._onComponentDidMount();\r\n  }\r\n\r\n  public render() {\r\n    // If there is no target window then we are likely in server side rendering and we should not render anything.\r\n    if (!this._targetWindow) {\r\n      return null;\r\n    }\r\n    let {\r\n      className,\r\n      target,\r\n      targetElement,\r\n      isBeakVisible,\r\n      beakStyle,\r\n      children,\r\n      beakWidth } = this.props;\r\n    let { positions, slideDirectionalClassName } = this.state;\r\n    let beakStyleWidth = beakWidth;\r\n\r\n    // This is here to support the old way of setting the beak size until version 1.0.0.\r\n    // beakStyle is now deprecated and will be be removed at version 1.0.0\r\n    if (beakStyle === 'ms-Callout-smallbeak') {\r\n      beakStyleWidth = 16;\r\n    }\r\n\r\n    let beakReactStyle: React.CSSProperties = {\r\n      top: positions && positions.beak ? positions.beak.top : BEAK_ORIGIN_POSITION.top,\r\n      left: positions && positions.beak ? positions.beak.left : BEAK_ORIGIN_POSITION.left,\r\n      height: beakStyleWidth,\r\n      width: beakStyleWidth\r\n    };\r\n\r\n    let contentMaxHeight: number = this._getMaxHeight();\r\n    let beakVisible: boolean = isBeakVisible && (!!targetElement || !!target);\r\n    let content = (\r\n      <div ref={ this._resolveRef('_hostElement') } className={ 'ms-Callout-container' }>\r\n        <div\r\n          className={\r\n            css(\r\n              'ms-Callout',\r\n              className,\r\n              slideDirectionalClassName ? `ms-u-${slideDirectionalClassName}` : ''\r\n            ) }\r\n          style={ positions ? positions.callout : OFF_SCREEN_POSITION }\r\n          ref={ this._resolveRef('_calloutElement') }\r\n          >\r\n\r\n          { beakVisible ? (\r\n            <div\r\n              className={ 'ms-Callout-beak' }\r\n              style={ beakReactStyle }\r\n              />) : (null) }\r\n\r\n          { beakVisible ?\r\n            (<div className='ms-Callout-beakCurtain' />) :\r\n            (null) }\r\n          <Popup\r\n            className='ms-Callout-main'\r\n            onDismiss={ this.dismiss }\r\n            shouldRestoreFocus={ true }\r\n            style={ { maxHeight: contentMaxHeight } }>\r\n            { children }\r\n          </Popup>\r\n        </div>\r\n      </div>\r\n    );\r\n    return content;\r\n  }\r\n\r\n  @autobind\r\n  public dismiss(ev?: Event | React.MouseEvent<HTMLElement>) {\r\n    let { onDismiss } = this.props;\r\n\r\n    if (onDismiss) {\r\n      onDismiss(ev);\r\n    }\r\n  }\r\n\r\n  protected _dismissOnLostFocus(ev: Event) {\r\n    let target = ev.target as HTMLElement;\r\n    if (ev.target !== this._targetWindow &&\r\n      this._hostElement &&\r\n      !elementContains(this._hostElement, target) &&\r\n      ((this._target as MouseEvent).stopPropagation ||\r\n        (!this._target || (target !== this._target && !elementContains(this._target as HTMLElement, target))))) {\r\n      this.dismiss(ev);\r\n    }\r\n  }\r\n\r\n  @autobind\r\n  protected _setInitialFocus() {\r\n    if (this.props.setInitialFocus && !this._didSetInitialFocus && this.state.positions) {\r\n      this._didSetInitialFocus = true;\r\n      focusFirstChild(this._calloutElement);\r\n    }\r\n  }\r\n\r\n  @autobind\r\n  protected _onComponentDidMount() {\r\n    // This is added so the callout will dismiss when the window is scrolled\r\n    // but not when something inside the callout is scrolled.\r\n    this._events.on(this._targetWindow, 'scroll', this._dismissOnLostFocus, true);\r\n    this._events.on(this._targetWindow, 'resize', this.dismiss, true);\r\n    this._events.on(this._targetWindow, 'focus', this._dismissOnLostFocus, true);\r\n    this._events.on(this._targetWindow, 'click', this._dismissOnLostFocus, true);\r\n\r\n    if (this.props.onLayerMounted) {\r\n      this.props.onLayerMounted();\r\n    }\r\n\r\n    this._updatePosition();\r\n  }\r\n\r\n  private _updatePosition() {\r\n    let { positions } = this.state;\r\n    let hostElement: HTMLElement = this._hostElement;\r\n    let calloutElement: HTMLElement = this._calloutElement;\r\n\r\n    if (hostElement && calloutElement) {\r\n      let currentProps: IPositionProps;\r\n      currentProps = assign(currentProps, this.props);\r\n      currentProps.bounds = this._getBounds();\r\n      // Temporary to be removed when targetElement is removed. Currently deprecated.\r\n      if (this.props.targetElement) {\r\n        currentProps.targetElement = this._target as HTMLElement;\r\n      } else {\r\n        currentProps.target = this._target;\r\n      }\r\n      let positionInfo: IPositionInfo = getRelativePositions(currentProps, hostElement, calloutElement);\r\n\r\n      // Set the new position only when the positions are not exists or one of the new callout positions are different.\r\n      // The position should not change if the position is within 2 decimal places.\r\n      if ((!positions && positionInfo) ||\r\n        (positions && positionInfo &&\r\n          (positions.callout.top.toFixed(2) !== positionInfo.calloutPosition.top.toFixed(2) ||\r\n            positions.callout.left.toFixed(2) !== positionInfo.calloutPosition.left.toFixed(2))\r\n          && this._positionAttempts < 5)) {\r\n        // We should not reposition the callout more than a few times, if it is then the content is likely resizing\r\n        // and we should stop trying to reposition to prevent a stack overflow.\r\n        this._positionAttempts++;\r\n        this.setState({\r\n          positions: {\r\n            callout: positionInfo.calloutPosition,\r\n            beak: positionInfo.beakPosition,\r\n          },\r\n          slideDirectionalClassName: positionInfo.directionalClassName\r\n        });\r\n      } else {\r\n        this._positionAttempts = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  private _getBounds(): IRectangle {\r\n    if (!this._bounds) {\r\n      let currentBounds = this.props.bounds;\r\n\r\n      if (!currentBounds) {\r\n        currentBounds = {\r\n          top: 0 + SPACE_FROM_EDGE,\r\n          left: 0 + SPACE_FROM_EDGE,\r\n          right: this._targetWindow.innerWidth - SPACE_FROM_EDGE,\r\n          bottom: this._targetWindow.innerHeight - SPACE_FROM_EDGE,\r\n          width: this._targetWindow.innerWidth - SPACE_FROM_EDGE * 2,\r\n          height: this._targetWindow.innerHeight - SPACE_FROM_EDGE * 2\r\n        };\r\n      }\r\n      this._bounds = currentBounds;\r\n    }\r\n    return this._bounds;\r\n  }\r\n\r\n  private _getMaxHeight(): number {\r\n    if (!this._maxHeight) {\r\n      this._maxHeight = this._getBounds().height - BORDER_WIDTH * 2;\r\n    }\r\n    return this._maxHeight;\r\n  }\r\n\r\n  private _setTargetWindowAndElement(target: HTMLElement | string | MouseEvent): void {\r\n    if (target) {\r\n      if (typeof target === 'string') {\r\n        let currentDoc: Document = getDocument();\r\n        this._target = currentDoc ? currentDoc.querySelector(target) as HTMLElement : null;\r\n        this._targetWindow = getWindow();\r\n      } else if ((target as MouseEvent).stopPropagation) {\r\n        this._target = target;\r\n        this._targetWindow = getWindow((target as MouseEvent).toElement as HTMLElement);\r\n      } else {\r\n        let targetElement: HTMLElement = target as HTMLElement;\r\n        this._target = target;\r\n        this._targetWindow = getWindow(targetElement);\r\n      }\r\n    } else {\r\n      this._targetWindow = getWindow();\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}